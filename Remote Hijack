import smtplib
from email.message import EmailMessage
import geoloc

def send_email(subject, body):
    msg = EmailMessage()
    msg.set_content(body)

    msg['Subject'] = subject
    msg['From'] = 'your_email@example.com'
    msg['To'] = 'recipient_email@example.com'

    server = smtplib.SMTP('smtp.example.com', 587)
    server.starttls()
    server.login('your_email@example.com', 'your_email_password')
    server.send_message(msg)
    server.quit()

def get_location(device_id):
    location = geoloc.from_device_id(device_id)
    return location

def main():
    device_id = 'your_device_id'  # replace with the actual device ID
    location = get_location(device_id)
    
    email_subject = f"Location of {device_id}"
    email_body = f"The current location of the device with ID {device_id} is:\n\nLatitude: {location.latitude}\nLongitude: {location.longitude}"
    
    send_email(email_subject, email_body)

if __name__ == '__main__':
    main()

